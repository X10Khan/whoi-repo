---
title: "wrangling"
author: "Christin Khan"
date: "October 22, 2018"
output:
  word_document: default
  pdf_document: default
  html_document: default
---

#install packages

```{r}
library(tidyverse)  # install.packages("tidyverse")
```

#read in data

```{r}
## read gapminder csv. Note the readr:: prefix identifies which package it's in
gapminder <- readr::read_csv('https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/gapminder.csv')
```

#look at the data

```{r}
head(gapminder) 
```
```{r}
tail (gapminder)
```

```{r}
summary (gapminder)  #summary stats
names (gapminder)    #column names
dim(gapminder)       #dimensions
ncol(gapminder)      #number of columns
nrow(gapminder)      #number of rows
```

# Dplyr!

#filter by rows

```{r}
filter(gapminder, lifeExp < 29)
filter(gapminder, country == "Mexico")
filter(gapminder, country %in% c("Mexico","Peru"))
filter(gapminder, country == "Mexico", year == 2002)
Sweden <- filter(gapminder, country == "Sweden")
summary (Sweden)
mean(Sweden$lifeExp)
```
#filter by columns

```{r}
select(gapminder,year,lifeExp)
select(gapminder, -continent, -lifeExp)
```
#use select and filter together

```{r}
gap_cambodia <- filter(gapminder, country == "Cambodia")
gap_cambodia2 <- select(gap_cambodia, -continent, -lifeExp)
```
The pipe operator will change your life
```{r}
#this:
gapminder %>% head(3)
#is equivalent to:
head(gapminder,3)

# let's improve this with pipes!
gap_cambodia <- gapminder %>%
  filter(country == "Cambodia") %>%
  select(-continent, -lifeExp)

head(gap_cambodia)

```

#mutate adds new variables
```{r}
gapminder %>% 
  mutate(index = 1:nrow(gapminder))

gapminder %>% 
  mutate(planet = "Earth")

gapminder %>% 
  mutate(gdp = pop * gdpPercap)

head(gapminder)

gapminder %>%
  filter(country %in% c("Egypt","Vietnam")) %>% 
  mutate (gdp = pop * gdpPercap) %>% 
  mutate(max_gdp = max(gdp))
  

```